<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Comanda - Hamburguesas ALI'BURGER'</title>
  <style>
    body {
      font-family: 'Courier New', monospace;
      background-color: #f2f2f2;
      padding: 20px;
    }
    .ticket {
      width: 350px;
      background-color: #fff;
      padding: 15px;
      margin: auto;
      border: 1px dashed #000;
      text-align: center;
    }
    .ticket h2, .ticket p {
      margin: 5px 0;
    }
    .productos {
      margin-top: 10px;
      text-align: left;
    }
    .producto-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .producto-item img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
      border-radius: 5px;
    }
    .producto-item label {
      flex: 1;
    }
    .producto-item input[type="number"] {
      width: 50px;
      margin-left: 10px;
    }
    #ticketGenerado {
      display: none;
      margin-top: 20px;
    }
    #detalle {
      white-space: pre-wrap;
      margin-top: 10px;
      text-align: left;
    }
    button {
      width: 100%;
      padding: 10px;
      background-color: #000;
      color: #fff;
      border: none;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #333;
    }
    @media print {
      body * { visibility: hidden; }
      #ticketGenerado, #ticketGenerado * { visibility: visible; }
      #ticketGenerado {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
      }
      button { display: none; }
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.6);
    }
    .modal-content {
      background-color: white;
      margin: 15% auto;
      padding: 20px;
      border: 2px solid #000;
      width: 320px;
      text-align: center;
      border-radius: 10px;
    }
    .modal-content button {
      margin-top: 15px;
      background-color: #000;
      width: auto;
      padding: 8px 15px;
    }
    .modal-content label {
      display: block;
      margin: 10px 0 5px;
      text-align: left;
    }
    .modal-content select, 
    .modal-content textarea {
      width: 100%;
      padding: 5px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

<div class="ticket">
  <h2>🍔 Hamburguesas ALI'BURGER'</h2>
  <p>COMANDA</p>
  <p id="fechaHora"></p>

  <div class="productos">
    <!-- Productos -->
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Hamburguesa Clásica" />
      <label for="hamburguesaClasica">Hamburguesa Clásica ($45)</label>
      <input type="number" id="hamburguesaClasica" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Hamburguesa Especial" />
      <label for="hamburguesaEspecial">Hamburguesa Especial ($50)</label>
      <input type="number" id="hamburguesaEspecial" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Hamburguesa Hawaiana" />
      <label for="hamburguesaHawaiana">Hamburguesa Hawaiana ($55)</label>
      <input type="number" id="hamburguesaHawaiana" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Hamburguesa con Papas" />
      <label for="hamburguesaPapas">Hamburguesa con Papas ($85)</label>
      <input type="number" id="hamburguesaPapas" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/1995/1995883.png" alt="Papas" />
      <label for="papas">Papas ($35)</label>
      <input type="number" id="papas" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Hot Dog" />
      <label for="hotdog">Hot Dog ($18)</label>
      <input type="number" id="hotdog" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Orden Hotdogs" />
      <label for="ordenHotdogs">Orden de 3 Hot Dogs ($45)</label>
      <input type="number" id="ordenHotdogs" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Alitas" />
      <label for="alitas">Alitas ($55)</label>
      <input type="number" id="alitas" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/1046/1046784.png" alt="Alitas con Papas" />
      <label for="alitasPapas">Alitas con Papas ($70)</label>
      <input type="number" id="alitasPapas" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/2974/2974401.png" alt="Plátanos Fritos" />
      <label for="platanosFritos">Plátanos Fritos ($30)</label>
      <input type="number" id="platanosFritos" min="0" value="0" />
    </div>
    <div class="producto-item">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Plátanos Capeados" />
      <label for="platanosCapeados">Plátanos Capeados ($35)</label>
      <input type="number" id="platanosCapeados" min="0" value="0" />
    </div>
  </div>

  <button onclick="generarComanda()">Generar Comanda</button>
</div>

<div class="ticket" id="ticketGenerado">
  <h2>🍔 Hamburguesas ALI'BURGER'</h2>
  <p>COMANDA</p>
  <p id="horaTicket"></p>
  <pre id="detalle"></pre>
  <p style="text-align: center; margin-top: 20px;">Gracias por su compra 🧾</p>
  <button onclick="mostrarModal()">Imprimir Ticket</button>
</div>

<!-- MODAL de Gracias -->
<div class="modal" id="modalGracias">
  <div class="modal-content">
    <p><strong>GRACIAS POR SU COMPRA</strong><br />VUELVA PRONTO</p>
    <button onclick="cerrarModal()">Aceptar e Imprimir</button>
  </div>
</div>

<!-- MODAL Encuesta -->
<div class="modal" id="modalEncuesta">
  <div class="modal-content">
    <h3>Encuesta de Satisfacción</h3>
    <form id="formEncuesta">
      <label for="satisfaccion">¿Cómo calificaría su experiencia?</label>
      <select id="satisfaccion" name="satisfaccion" required>
        <option value="">Seleccione...</option>
        <option value="Excelente">Excelente</option>
        <option value="Buena">Buena</option>
        <option value="Regular">Regular</option>
        <option value="Mala">Mala</option>
      </select>

      <label for="comentarios">Comentarios adicionales:</label>
      <textarea id="comentarios" name="comentarios" rows="3" placeholder="Escriba aquí sus comentarios"></textarea>

      <button type="submit">Enviar Encuesta</button>
    </form>
  </div>
</div>

<script>
  const precios = {
    hamburguesaClasica: 45,
    hamburguesaEspecial: 50,
    hamburguesaHawaiana: 55,
    hamburguesaPapas: 85,
    papas: 35,
    hotdog: 18,
    ordenHotdogs: 45,
    alitas: 55,
    alitasPapas: 70,
    platanosFritos: 30,
    platanosCapeados: 35
  };

  setInterval(() => {
    const ahora = new Date();
    document.getElementById("fechaHora").innerText = ahora.toLocaleString();
  }, 1000);

  function generarComanda() {
    let subtotal = 0;
    let comanda = "------------------------------\n";
    const ahora = new Date();
    comanda += `FECHA/HORA: ${ahora.toLocaleString()}\n`;
    comanda += "------------------------------\n";

    for (let id in precios) {
      const cantidad = parseInt(document.getElementById(id).value) || 0;
      if (cantidad > 0) {
        const totalItem = cantidad * precios[id];
        subtotal += totalItem;
        comanda += `${formatearNombre(id)} x${cantidad} - $${totalItem.toFixed(2)}\n`;
      }
    }

    if (subtotal === 0) {
      alert("Por favor, seleccione al menos un producto.");
      return;
    }

    const iva = subtotal * 0.16;
    const total = subtotal + iva;

    comanda += "------------------------------\n";
    comanda += `SUBTOTAL: $${subtotal.toFixed(2)}\n`;
    comanda += `IVA (.16%): $${iva.toFixed(2)}\n`;
    comanda += `TOTAL: $${total.toFixed(2)}\n`;
    comanda += "------------------------------\n";

    document.getElementById("detalle").innerText = comanda;
    document.getElementById("horaTicket").innerText = ahora.toLocaleString();
    document.getElementById("ticketGenerado").style.display = "block";
    window.scrollTo(0, document.body.scrollHeight);
  }

  function formatearNombre(id) {
    return id
      .replace(/([A-Z])/g, " $1")
      .replace(/_/g, " ")
      .replace(/\b\w/g, (c) => c.toUpperCase());
  }

  function mostrarModal() {
    document.getElementById("modalGracias").style.display = "block";
  }

  function cerrarModal() {
    document.getElementById("modalGracias").style.display = "none";
    window.print();
    setTimeout(() => {
      document.getElementById("modalEncuesta").style.display = "block";
    }, 500);
  }

  document.getElementById("formEncuesta").addEventListener("submit", function (e) {
    e.preventDefault();
    const satisfaccion = this.satisfaccion.value;
    const comentarios = this.comentarios.value.trim();
    console.log("Encuesta enviada:");
    console.log("Satisfacción:", satisfaccion);
    console.log("Comentarios:", comentarios);
    alert("¡Gracias por su opinión!");
    this.reset();
    document.getElementById("modalEncuesta").style.display = "none";
  });
</script>

</body>
</html>
